<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="K-Works - „É¢„Éê„Ç§„É´„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÈñãÁô∫">
    <title>K-Works</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <main class="scroll-snap">
        <canvas class="wave-canvas wave-canvas-back" aria-hidden="true"></canvas>
        <canvas class="wave-canvas wave-canvas-front" aria-hidden="true"></canvas>
        <section class="panel apps-panel">
            <div class="panel-card scene">
                <div class="logo">K-Works</div>
                <div class="apps-grid">
                    <div class="app-tile">
                        <a class="card day app-card" href="https://emofleets.com">
                            <div class="card-content">
                                <div class="app-icon-wrap">
                                    <img class="app-logo" src="assets/emofleets-logo.svg" alt="Emofleets logo">
                                </div>
                            </div>
                        </a>
                        <p class="card-title">Emofleets</p>
                    </div>
                    <div class="app-tile">
                        <a class="card day app-card" href="https://nyoromaru.com/app/gohan-gacha">
                            <div class="card-content">
                                <div class="app-icon-wrap">
                                    <div class="app-emoji" aria-hidden="true">üçö</div>
                                </div>
                            </div>
                        </a>
                        <p class="card-title">„Åî„ÅØ„Çì„Ç¨„ÉÅ„É£</p>
                    </div>
                </div>
            </div>
        </section>
        <section class="panel info-panel">
            <div class="panel-card scene">
                <section class="info-block">
                    <p class="info-label">About</p>
                    <p class="info-sub">iOS„ÉªAndroid„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÈñãÁô∫</p>
                    <p class="info-text">ÊúÄÊñ∞„ÅÆ„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„Å®„ÇØ„É™„Ç®„Ç§„ÉÜ„Ç£„Éñ„Å™Áô∫ÊÉ≥„Åß„ÄÅÊó•Â∏∏„Çí„Çà„ÇäË±ä„Åã„Å´„Åô„Çã„Éó„É≠„ÉÄ„ÇØ„Éà„ÇíÂâµÈÄ†„Åó„Åæ„Åô„ÄÇ</p>
                </section>
            </div>
        </section>
        <section class="panel info-panel">
            <div class="scene">
                <section class="info-block">
                    <p class="info-label">Contact</p>
                    <p class="info-text">nyoromaru.works@gmail.com</p>
                </section>
            </div>
        </section>
    </main>
    <footer class="site-footer">
        <p>&copy; 2025 K-Works. All rights reserved.</p>
    </footer>
    <script>
        const backCanvas = document.querySelector(".wave-canvas-back");
        const frontCanvas = document.querySelector(".wave-canvas-front");
        const scroller = document.querySelector(".scroll-snap");
        const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)");
        const backCtx = backCanvas.getContext("2d");
        const frontCtx = frontCanvas.getContext("2d");
        let rafId = null;
        let width = 0;
        let height = 0;
        let dpr = 1;

        const backWaves = [
            { amplitude: 26, length: 0.012, speed: 0.22, offset: 0.2, parallax: 0.04, color: "rgba(208, 217, 232, 0.5)" },
            { amplitude: 36, length: 0.009, speed: 0.16, offset: 0.45, parallax: 0.06, color: "rgba(195, 208, 228, 0.55)" },
            { amplitude: 46, length: 0.007, speed: 0.12, offset: 0.7, parallax: 0.08, color: "rgba(180, 196, 220, 0.6)" }
        ];

        const frontWaves = [
            { amplitude: 18, length: 0.009, speed: 0.28, offset: 0.78, parallax: 0.12, color: "rgba(220, 231, 246, 0.75)" }
        ];

        const resize = () => {
            dpr = Math.min(window.devicePixelRatio || 1, 2);
            width = scroller.clientWidth;
            height = scroller.clientHeight;
            [backCanvas, frontCanvas].forEach((c) => {
                c.width = width * dpr;
                c.height = height * dpr;
                c.style.width = `${width}px`;
                c.style.height = `${height}px`;
            });
            backCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
            frontCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
        };

        const drawWave = (ctx, time, wave, scrollOffset = 0) => {
            ctx.beginPath();
            const baseY = height * wave.offset - scrollOffset;
            ctx.moveTo(0, height);
            ctx.lineTo(0, baseY);
            for (let x = 0; x <= width; x += 6) {
                const phase = x * wave.length - time * wave.speed;
                const wobble = Math.sin(phase * 0.45 + time * 0.25) * (wave.amplitude * 0.45);
                const y = baseY + Math.sin(phase) * wave.amplitude + wobble;
                ctx.lineTo(x, y);
            }
            ctx.lineTo(width, height);
            ctx.closePath();
            ctx.fillStyle = wave.color;
            ctx.fill();
        };

        const render = (time) => {
            const t = time * 0.001;
            const scrollTop = scroller.scrollTop;
            backCtx.clearRect(0, 0, width, height);
            frontCtx.clearRect(0, 0, width, height);
            backWaves.forEach((wave) => drawWave(backCtx, t, wave, scrollTop * wave.parallax));
            frontWaves.forEach((wave) => drawWave(frontCtx, t, wave, scrollTop * wave.parallax));
            rafId = requestAnimationFrame(render);
        };

        const start = () => {
            if (rafId !== null) return;
            rafId = requestAnimationFrame(render);
        };

        const stop = () => {
            if (rafId === null) return;
            cancelAnimationFrame(rafId);
            rafId = null;
        };

        const onMotionChange = () => {
            if (prefersReduced.matches) {
                stop();
                backCtx.clearRect(0, 0, width, height);
                frontCtx.clearRect(0, 0, width, height);
            } else {
                start();
            }
        };

        resize();
        window.addEventListener("resize", resize, { passive: true });
        document.addEventListener("visibilitychange", () => {
            if (document.hidden) stop();
            else onMotionChange();
        });
        prefersReduced.addEventListener("change", onMotionChange);
        onMotionChange();
    </script>
</body>
</html>
